(this["webpackJsonpreact-source"]=this["webpackJsonpreact-source"]||[]).push([[0],{32:function(e,t,n){e.exports=n.p+"static/media/logo.1a5053e9.png"},35:function(e,t,n){e.exports=n(63)},40:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(31),u=n.n(c),o=n(33),i=n(3),l=(n(40),n(32)),s=n.n(l);var m=function(e){var t=e.children;return a.a.createElement("header",null,a.a.createElement("a",{href:"/"}," ",a.a.createElement("img",{src:s.a,alt:"logo"})," "),t)},d=n(1),f=n(10);var p=function(e){var t=e.once,n=e.isExpanded,c=void 0!==n&&n,u=e.isConfirm,o=Object(f.a)(e,["once","isExpanded","isConfirm"]),i=o.renders,l=Object(f.a)(o,["renders"]).caption,s=Object(r.useState)({isExpanded:c,count:0}),m=Object(d.a)(s,2),p=m[0],E=m[1],b=function(){return E((function(e){return e.count>0&&t?e:{isExpanded:!e.isExpanded,count:e.count+1}}))},v=i.renderExpanded,h=i.renderShrinked;return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{type:"button",onClick:b},l),p.isExpanded?v&&a.a.createElement(a.a.Fragment,null,u&&a.a.createElement("button",{onClick:b},"Cancelar"),v()):h&&h())},E=n(4),b=n(15),v=n(16),h=new(function(){function e(){Object(b.a)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.programs=new Map(n)}return Object(v.a)(e,[{key:"names",value:function(){return Array.from(this.programs.keys())}},{key:"alias",value:function(e){return this.programs.get(e)}},{key:"aliases",value:function(){return Array.from(this.programs.values())}},{key:"entries",value:function(){return Array.from(this.programs.entries())}}]),e}())(["math","matem\xe1ticas"],["reading","lectura"],["english","ingles"]),g=new Date,j=g.getDate(),O=g.getMonth()+1,y=g.getFullYear(),S=[{id:"birthday",content:[{id:"birthday",sources:["/api/students?date_month_eq_birth=".concat(O,"&date_dayOfMonth_eq_birth=").concat(j)],renderUnknown:function(){return"Nadie cumple a\xf1os hoy..."},formatter:function(e){return"".concat(e.fullname," cumple a\xf1os hoy. Felicital@")}}]},{id:"annivday",content:h.names().map((function(e){return{id:"annivday-".concat(e),sources:w(e,!0),renderUnknown:function(){return"Nadie festeja su aniversario en ".concat(h.alias(e)," hoy...")},formatter:function(t){return"".concat(t.fullname," cumple ").concat(C(t,e)," meses en ").concat(h.alias(e)," en Kumon. Felicital@")}}}))}],k=[{id:"birthmonth",title:"Cumplea\xf1os del Mes",content:[{id:"birthmonth",sources:["/api/students?date_month_eq_birth=".concat(O)],renderUnknown:function(){return"Nadie cumple a\xf1os este mes..."},renderLoading:function(){return"Cargando..."},formatter:function(e){var t=new Date(e.birth);return"".concat(e.fullname," cumple a\xf1os este mes el d\xeda ").concat(t.getDate()," / ").concat(t.getMonth()+1)}}]},{id:"annivmonth",title:"Aniversarios del Mes",content:h.names().map((function(e){return{id:"annivmonth-".concat(e),sources:w(e,!1),renderUnknown:function(){return"Nadie festeja su aniversario en ".concat(h.alias(e)," hoy...")},renderLoading:function(){return"Cargando..."},formatter:function(t){return"".concat(t.fullname," cumple este mes ").concat(C(t,e)," meses en ").concat(h.alias(e)," en Kumon.")}}}))},{id:"paymonth",title:"Pagos del Mes",content:h.names().map((function(e){return{id:"paymonth-".concat(e),sources:["api/students?date_toDate_ne_programs>".concat(e,">pay-current>starting=").concat(y,"-").concat(String(O).padStart(2,0),"-01"),"api/students?compare_gt_programs>".concat(e,">fee=programs>").concat(e,">pay-current>amount&date_toDate_eq_programs>").concat(e,">pay-current>starting=").concat(y,"-").concat(String(O).padStart(2,0),"-01")],renderUnknown:function(){return"Nadie debe pagos en ".concat(h.alias(e)," este mes...")},renderLoading:function(){return"Cargando..."},formatter:function(t){return"".concat(t.fullname," pag\xf3 $").concat(t.programs[e]["pay-current"].amount," / $").concat(t.programs[e].fee," este mes en ").concat(h.alias(e),".")}}}))}];function w(e,t){for(var n=y,r=O,a={},c=3;c<15;c+=3){if((r-=3)<=0){n--;var u=(r%12+12)%12;r=0===u?12:u}a[n]=a[n]?[].concat(Object(E.a)(a[n]),[r]):[r]}return Object.keys(a).reduce((function(n,r){return n.push("/api/students?date_year_eq_programs>".concat(e,">enroll=").concat(r,"&date_month_eq_programs>").concat(e,">enroll=").concat(a[r].join("|")).concat(t?"&date_dayOfMonth_eq_programs>".concat(e,">enroll=").concat(j):"")),n}),[])}function C(e,t){var n=new Date(e.programs[t].enroll);return O-n.getMonth()-1}var x=n(11),F=n(2),N=n.n(F);var I=function(e){var t={isFetching:!0,fetched:null,time:Date.now()},n=Object(r.useState)(t),a=Object(d.a)(n,2),c=a[0],u=a[1];return Object(r.useEffect)((function(){var t=N.a.CancelToken.source();return Promise.all(e.map((function(e){return N.a.get(e,{cancelToken:t.token})}))).then((function(e){var t=function(e){var t=e.reduce((function(e,t){var n=t.data;return Array.isArray(n)?[].concat(Object(E.a)(e),Object(E.a)(n)):e}),[]);if(0===t.length)throw new Error;var n=new Map(t.map((function(e){return[e.uuid,e]})));return Object(E.a)(n.values())}(e);u((function(e){return Object(x.a)(Object(x.a)({},e),{},{isFetching:!1,fetched:t})}))})).catch((function(e){N.a.isCancel(e)||u((function(e){return Object(x.a)(Object(x.a)({},e),{},{isFetching:!1,fetched:null})}))})),function(){return t.cancel()}}),[c.time,e]),[c,function(){return u((function(e){return Object(x.a)(Object(x.a)({},e),{},{isFetching:!0,time:Date.now()})}))}]};var A=function(e){var t=e.sources,n=e.renders,c=Object(r.useRef)(t),u=I(c.current),o=Object(d.a)(u,2),i=o[0],l=o[1],s=n.renderLoading,m=n.renderFound,f=n.renderUnknown;return i.isFetching&&s?a.a.createElement("div",null,s()):(!i.isFetching&&i.fetched||i.fetched&&!s)&&m?a.a.createElement("div",null,m(i.fetched,l)):i.isFetching||i.fetched||!f?null:a.a.createElement("div",null,f(l))};var T=function(e){var t=e.students,n=e.formatter;return t&&n?t.map((function(e){return a.a.createElement("div",{key:e.uuid},n(e))})):null};var P=function(){return a.a.createElement(p,{caption:"Ver notificaciones",renders:{renderExpanded:function(){return S.map((function(e){var t=e.content;return a.a.createElement(r.Fragment,{key:e.id},t.map((function(e){return a.a.createElement(A,{key:e.id,sources:e.sources,renders:{renderUnknown:e.renderUnknown,renderFound:function(t){return a.a.createElement(T,{students:t,formatter:e.formatter})}}})})))}))}}})},_=Object(r.createContext)();function D(e){var t=e.children,n=new URLSearchParams(window.location.search).get("uuid");return a.a.createElement(_.Provider,{value:n},t)}var M=function(){function e(){Object(b.a)(this,e),this.handlers={onSuccess:new R,onError:new R}}return Object(v.a)(e,[{key:"onSuccess",value:function(){return this.handlers.onSuccess}},{key:"onError",value:function(){return this.handlers.onError}}]),e}(),R=function(){function e(){Object(b.a)(this,e),this.handlers=new Map}return Object(v.a)(e,[{key:"register",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){return e.handlers.set(t.id,t.handler)}))}},{key:"unregister",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){return e.handlers.delete(t.id)}))}},{key:"execute",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Object(E.a)(this.handlers.values()).forEach((function(e){return e.apply(void 0,t)}))}},{key:"handler",value:function(e){return this.handlers.get(e)}}]),e}();function U(){var e=Object(r.useState)({toSubmit:null,trigger:null}),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({success:null,error:null}),u=Object(d.a)(c,2),o=u[0],i=u[1],l=Object(r.useRef)(new M).current;return H(l,Object(r.useRef)({onSuccess:[{id:"success",handler:function(e){return i({success:e,error:null})}}],onError:[{id:"error",handler:function(e){return i({error:e,success:null})}}]})),[function(e,t){t.preventDefault(),t.persist(),i({success:null,error:null}),a({toSubmit:e,trigger:t})},n,o,l]}function q(){var e=U(),t=Object(d.a)(e,4),n=t[0],a=t[1],c=t[2],u=t[3],o=Object(r.useContext)(_);return Object(r.useEffect)((function(){if(a.toSubmit&&a.toSubmit.current){var e=a.toSubmit.current,t=e.filePath,n=N.a.CancelToken.source(),r={headers:{Accept:"*/*","Content-Type":"".concat(e.type)}};return N.a.post("/api/students/upload/".concat(t,"?uuid=").concat(o),e,Object(x.a)(Object(x.a)({},r),{},{cancelToken:n.token})).then((function(e){return u.onSuccess().execute(e.data.src)})).catch((function(e){N.a.isCancel(e)||u.onError().execute(e)})),function(){return n.cancel()}}}),[a,u,o]),[n,c,u]}function H(e,t){Object(r.useEffect)((function(){var n,r,a=t.current||{},c=a.onSuccess,u=void 0===c?[]:c,o=a.onError,i=void 0===o?[]:o;return(n=e.onSuccess()).register.apply(n,Object(E.a)(u)),(r=e.onError()).register.apply(r,Object(E.a)(i)),function(){var t,n;(t=e.onSuccess()).unregister.apply(t,Object(E.a)(u)),(n=e.onError()).unregister.apply(n,Object(E.a)(i))}}),[e,t])}function L(){var e=Object(r.useRef)({});return[Object(r.useCallback)((function(t){var n=t.target.name,r=t.target.value;r?e.current[n]=r:delete e.current[n]}),[]),e]}function B(e){return function(){var t=Object(r.useRef)();return[Object(r.useCallback)((function(n){var r=n.target.files[0];r.filePath=e,t.current=r}),[]),t]}}var $=function(e,t){var n=t.useSubmit,c=t.useInput;return function(t){var u=t.renders,o=void 0===u?{}:u,i=Object(f.a)(t,["renders"]),l=i.onSuccess,s=i.onError,m=i.submitButton,p=void 0===m||m,E=i.values,b=void 0===E?{}:E,v=c(),h=Object(d.a)(v,2),g=h[0],j=h[1],O=n(),y=Object(d.a)(O,3),S=y[0],k=y[1],w=y[2];H(w,Object(r.useRef)({onSuccess:l,onError:s}));var C=o.renderSuccess,x=void 0===C?function(){return null}:C,F=o.renderError,N=void 0===F?function(){return null}:F;return a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{onSubmit:function(e){return S(j,e)}},a.a.createElement(e,{onInput:g,initial:{values:b,path:[]},submitHandler:w}),p&&a.a.createElement("button",{type:"submit"},"Subir")),k.success&&a.a.createElement(r.Fragment,{key:Date.now()},x(k.success)),k.error&&a.a.createElement(r.Fragment,{key:Date.now()},N(k.error)))}};var z=function(e){var t=e.fields,n=void 0===t?[]:t,r=e.initial,c=void 0===r?{}:r,u=e.onInput,o=e.required,i=void 0!==o&&o,l=c.values,s=c.path||[];return a.a.createElement(a.a.Fragment,null," ",n.map((function(e){var t=[].concat(Object(E.a)(s),[e.name]).join("."),n=l&&void 0!==l[e.name]?l[e.name]:"",r="date"===e.type?n.split("T")[0]:n;return a.a.createElement("label",{key:e.name}," ",e.label,"select"===e.type?a.a.createElement("select",{name:t,onInput:u,defaultValue:r||e.selected},e.options.map((function(e){return a.a.createElement("option",{key:e,value:e},e)}))):a.a.createElement("input",{type:e.type,name:t,defaultValue:r,onInput:u,required:i}))}))," ")};function V(e){var t=e.initial,n=e.onInput;return a.a.createElement(z,{initial:t,onInput:n,fields:[{name:"name",label:"Nombre",type:"text"},{name:"lastname",label:"Apellido",type:"text"},{name:"birth",label:"Fecha de Nacimiento",type:"date"}],required:!0})}function Y(e){var t=e.initial,n=e.onInput,c=e.isRegister;return a.a.createElement(a.a.Fragment,null,a.a.createElement(z,{fields:[{name:"enroll",label:"Fecha de Ingreso",type:"date"},{name:"fee",label:"Pago Mensual",type:"text"},{name:"level",label:"Nivel",type:"text"}],onInput:n,initial:t}),!c&&a.a.createElement(a.a.Fragment,null,[{name:"pay-current",label:"Pago de Mes Actual"},{name:"pay-last",label:"Pago de Mes Anterior"}].map((function(e){var c=new Date,u=t.values[e.name],o=u.starting?new Date(u.starting):null;return a.a.createElement(r.Fragment,{key:e.name},a.a.createElement("label",null,e.label),a.a.createElement(J,{initial:{values:o&&c.getMonth()===o.getUTCMonth()&&c.getFullYear()===o.getUTCFullYear()?u:null,path:[].concat(Object(E.a)(t.path),[e.name])},onInput:n}))}))))}function J(e){var t=e.initial,n=e.onInput;return a.a.createElement(z,{fields:[{name:"amount",label:"Cantidad",type:"text"},{name:"method",label:"Forma de Pago",type:"select",selected:"",options:["","Efectivo","Transferencia","Deposito","Tarjeta de Cr\xe9dito","Otro"]},{name:"date",label:"Fecha de Pago",type:"date"}],initial:t,onInput:n})}function K(e){var t=e.initial,n=e.onInput,r=e.submitHandler,c=Object(f.a)(e,["initial","onInput","submitHandler"]),u=t.values;return h.names().map((function(e){return u&&u[e]?a.a.createElement("div",{key:e},a.a.createElement("span",{className:"program-name"},"Programa: ",h.alias(e)),a.a.createElement(Y,Object.assign({initial:{values:u[e],path:[].concat(Object(E.a)(t.path),[e])},onInput:n},c)),a.a.createElement(Q,{submitHandler:r,programName:e})):a.a.createElement("div",{key:e},a.a.createElement("span",{className:"program-name"},"Programa: ",h.alias(e)),a.a.createElement(W,{submitHandler:r,programName:e,renders:{renderExpanded:function(){return a.a.createElement(Y,Object.assign({initial:{values:{},path:[].concat(Object(E.a)(t.path),[e])},onInput:n},c))}}}))}))}function Q(e){var t=e.programName,n=e.submitHandler,c=Object(r.useState)(!1),u=Object(d.a)(c,2),o=u[0],i=u[1],l=Object(r.useContext)(_),s=Object(r.useRef)({onSuccess:[{id:"".concat(t,"-unsub"),handler:function(){return i(!1)}}]});return H(n,s),a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{type:"button",onClick:function(){return i(!0)}},"Dar de Baja de Programa"),o?a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{type:"button",onClick:function(e){N.a.delete("/api/students/programs?program=".concat(t,"&uuid=").concat(l)).then((function(e){n.onSuccess().handler("fetcher")(),n.onSuccess().handler("success")(e.data)})).catch((function(e){return n.onError().handler("error")()}))}},"Confirmar"),a.a.createElement("button",{type:"button",onClick:function(){return i(!1)}},"Cancelar")):null)}function W(e){var t=e.programName,n=e.submitHandler,c=e.renders,u=Object(r.useState)(!1),o=Object(d.a)(u,2),i=o[0],l=o[1];H(n,Object(r.useRef)({onSuccess:[{id:"".concat(t,"-sub"),handler:function(){return l(!1)}}]}));var s=c.renderExpanded,m=void 0===s?function(){return null}:s,f=c.renderShrinked,p=void 0===f?function(){return null}:f;return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{type:"button",onClick:function(){return l(!0)}},"Inscribir"),i?m():p())}function G(e){var t=e.isRegister;return function(e){var n=e.initial,r=e.onInput,c=e.submitHandler;return a.a.createElement(a.a.Fragment,null,a.a.createElement(V,{initial:n,onInput:r}),a.a.createElement(K,{initial:{values:n.values.programs,path:[].concat(Object(E.a)(n.path),["programs"])},onInput:r,submitHandler:c,isRegister:t}))}}var X=G({isRegister:!0}),Z=G({isRegister:!1}),ee=$(X,{useSubmit:function(){var e=U(),t=Object(d.a)(e,4),n=t[0],a=t[1],c=t[2],u=t[3];Object(r.useEffect)((function(){if(a.toSubmit){var e=a.toSubmit,t=a.toSubmit.current,n=a.trigger,r=N.a.CancelToken.source();return N.a.post("/api/students",t,{cancelToken:r.token}).then((function(t){return u.onSuccess().execute(t,n,e)})).catch((function(t){N.a.isCancel(t)||u.onError().execute(t,n,e)})),function(){return r.cancel()}}}),[a,u]);var o=Object(r.useRef)({onSuccess:[{id:"resetter",handler:function(e,t,n){t.target.reset(),n.current={}}}]});return H(u,o),[n,c,u]},useInput:L}),te=$(Z,{useSubmit:function(){var e=U(),t=Object(d.a)(e,4),n=t[0],a=t[1],c=t[2],u=t[3],o=Object(r.useContext)(_);Object(r.useEffect)((function(){if(a.toSubmit){var e=a.trigger,t=a.toSubmit,n=a.toSubmit.current,r=N.a.CancelToken.source();return N.a.put("/api/students/update?uuid=".concat(o),n,{cancelToken:r.token}).then((function(n){u.onSuccess().execute(n,e,t)})).catch((function(n){N.a.isCancel(n)||u.onError().execute(n,e,t)})),function(){return r.cancel()}}}),[a,u,o]);var i=Object(r.useRef)({onSuccess:[{id:"resetter",handler:function(e,t,n){return n.current={}}}]});return H(u,i),[n,c,u]},useInput:L});function ne(e){var t=e.type,n=e.children;return a.a.createElement("div",{className:"card-".concat(t)},n)}function re(e){var t=e.duration,n=e.type,c=e.children,u=Object(r.useState)(t<=0),o=Object(d.a)(u,2),i=o[0],l=o[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){return l(!0)}),t);return function(){return clearTimeout(e)}}),[t]),i?null:a.a.createElement(ne,{type:n},c)}var ae=function(){return a.a.createElement(p,{caption:"Registrar Alumno",renders:{renderExpanded:function(){return a.a.createElement(ee,{renders:{renderSuccess:function(){return a.a.createElement(re,{duration:2500,type:"success"},"Alumno registrado correctamente!")},renderError:function(){return a.a.createElement(re,{duration:2500,type:"error"},"Error al registrar alumno")}}})}}})};function ce(e){var t=e.onQuery;return a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,"Busca alumnos: "),a.a.createElement("input",{type:"text",onInput:t}))}function ue(e){var t=e.results;return a.a.createElement(T,{students:t,formatter:function(e){return a.a.createElement("div",{className:"search-result-wrapper"},a.a.createElement("a",{className:"search-result-link",href:"/student?uuid=".concat(e.uuid)},a.a.createElement("div",{className:"search-result-info"},a.a.createElement("p",null,e.fullname),a.a.createElement("p",null,"Naci\xf3: ",e.birth.split("T")[0]))))}})}var oe=function(){var e=Object(r.useRef)([]),t=e.current,n=I(t),c=Object(d.a)(n,2),u=c[0],o=c[1],i=u.fetched;return a.a.createElement("div",{className:"student-search"},a.a.createElement(ce,{onQuery:function(t){var n="/api/students?autocomplete_fullname=",r=t.target.value?"".concat(n).concat(t.target.value):"".concat(n,"$");e.current=[r],o()}}),a.a.createElement(ue,{results:i}))},ie=a.a.createContext({onToggle:function(){},isActive:null});function le(e){var t=e.children,n=Object(r.useState)(!1),c=Object(d.a)(n,2),u=c[0],o=c[1];return a.a.createElement(ie.Provider,{value:{onToggle:function(){return o(!u)},isActive:u}},a.a.createElement("section",{className:"accordion"},t))}function se(e){var t=e.children,n=Object(r.useRef)(),c=Object(r.useContext)(ie);return Object(r.useEffect)((function(){var e=new MutationObserver((function(){n.current.style.height=c.isActive?"".concat(n.current.scrollHeight,"px"):"0px"}));return e.observe(n.current,{childList:!0,subtree:!0}),function(){return e.disconnect()}}),[c.isActive]),Object(r.useLayoutEffect)((function(){n.current.style.height=c.isActive?"".concat(n.current.scrollHeight,"px"):"0px"}),[c.isActive]),a.a.createElement("div",{ref:n,className:"accordion-wrapper"},a.a.createElement("div",{className:"accordion-content"},t))}function me(e){var t=e.title,n=e.children,c=Object(r.useContext)(ie);return a.a.createElement("div",{className:"accordion-head",onClick:c.onToggle},a.a.createElement("span",{className:"accordion-title"},t),n)}function de(e){var t=e.className,n=e.children,c=Object(r.useContext)(ie);return a.a.createElement("span",{className:"".concat(t||"accordion-icon"," ").concat(c.isActive?"active":"inactive")},n)}var fe=function(){return k.map((function(e){return a.a.createElement(le,{key:e.id},a.a.createElement(me,{title:e.title},a.a.createElement(de,null,"+")),a.a.createElement(se,null,e.content.map((function(e){return a.a.createElement(A,{key:e.id,sources:e.sources,renders:{renderUnknown:e.renderUnknown,renderLoading:e.renderLoading,renderFound:function(t){return a.a.createElement(T,{students:t,formatter:e.formatter})}}})}))))}))};var pe=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(m,null,a.a.createElement(P,null)),a.a.createElement(fe,null),a.a.createElement(oe,null),a.a.createElement(ae,null))};var Ee=function(e){var t=e.onInput;return a.a.createElement("input",{type:"file",onInput:t})};var be=function(e){var t=e.filePath,n=Object(f.a)(e,["filePath"]),r=$(Ee,{useSubmit:q,useInput:B(t)});return a.a.createElement(r,n)};function ve(e){var t=e.filePath,n=e.fileStartSource,c=Object(f.a)(e,["filePath","fileStartSource"]).render,u=Object(r.useState)({src:n,timestamp:Date.now()}),o=Object(d.a)(u,2),i=o[0],l=o[1];return a.a.createElement(a.a.Fragment,null,c&&c(i),a.a.createElement(be,{filePath:t,onSuccess:[{id:"source-changer",handler:function(e){return l({src:e,timestamp:Date.now()})}}]}))}function he(e){var t=e.fileStartSource,n="./media/students",r="".concat(n,"/photo/placeholder.jpg"),c=function(e){return e.target.src=r};return a.a.createElement(ve,{filePath:"photo",fileStartSource:t,render:function(e){return a.a.createElement("img",{src:e.src?"".concat(n,"/").concat(e.src,"?timestamp=").concat(e.timestamp):r,alt:"alumno",onError:c})}})}function ge(e){var t=e.fileStartSource,n=e.reportPath,r="report/".concat(n);return a.a.createElement(ve,{filePath:r,fileStartSource:t,render:function(e){return e.src?a.a.createElement("a",{href:"".concat("./media/students","/").concat(e.src),download:"boleta"},"Descargado: ",(new Date).toISOString()):a.a.createElement("p",null,"No has subido ninguna boleta a\xfan...")}})}var je=$((function(e){var t=e.onInput;return a.a.createElement(p,{isConfirm:!0,caption:"Dar de baja",renders:{renderExpanded:function(){return a.a.createElement("button",{onClick:t},"Confirmar")}}})}),{useSubmit:function(){var e=U(),t=Object(d.a)(e,4),n=t[0],a=t[1],c=t[2],u=t[3],o=Object(r.useContext)(_);return Object(r.useEffect)((function(){if(a.toSubmit&&a.toSubmit.current){var e=N.a.CancelToken.source();return N.a.delete("/api/students/delete?uuid=".concat(o),{cancelToken:e.token}).then((function(){return window.location.href="/"})).catch((function(e){N.a.isCancel(e)||u.onError().execute(e)})),function(){return e.cancel()}}}),[a,u,o]),[n,c,u]},useInput:function(){var e=Object(r.useRef)(!1);return[Object(r.useCallback)((function(){return e.current=!0}),[]),e]}});var Oe=function(){return a.a.createElement(je,{submitButton:!1,renders:{renderError:function(){return a.a.createElement(re,{duration:2500,type:"error"},a.a.createElement("p",null,"No se pudo dar de baja"))}}})};function ye(){var e=Object(r.useContext)(_);return a.a.createElement(A,{sources:["/api/students?uuid=".concat(e)],renders:{renderUnknown:function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Alumno No Encontrado"),a.a.createElement("p",null,"Si piensas que ocurri\xf3 un error, presiona aqu\xed"),a.a.createElement("button",{onClick:function(){return e()}},"Reintentar"))},renderFound:function(e){return a.a.createElement(T,{students:e,formatter:function(e){return a.a.createElement(he,{fileStartSource:e["photo-src"]})}})}}})}function Se(e){var t=e.students;return a.a.createElement(T,{students:t,formatter:function(e){var t=e.programs;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Oe,null),a.a.createElement("p",null,"Nombre: ",e.fullname),a.a.createElement("p",null,"Fecha de Nacimiento: ",e.birth.split("T")[0]),Object.keys(t).map((function(e){var n=t[e];return a.a.createElement("div",{key:e},a.a.createElement("p",null,"Inscrito en: ",h.alias(e)),a.a.createElement("p",null,"Fecha de Inscripci\xf3n: ",n.enroll.split("T")[0]),a.a.createElement("p",null,"Nivel: ",n.level),a.a.createElement("p",null,"Cuota: ",n.fee),a.a.createElement("p",null,"Pago de Mes Actual: ",n["pay-current"].amount),a.a.createElement("p",null,"Fecha de Pago de Mes Actual:",n["pay-current"].date?n["pay-current"].date.split("T")[0]:"No ha pagado"),a.a.createElement("p",null,"Pago de Mes Anterior: ",n["pay-last"].amount),a.a.createElement("p",null,"Fecha de Pago de Mes Anterior:",n["pay-last"].date?n["pay-last"].date.split("T")[0]:"No ha pagado"),a.a.createElement("p",null,"Boleta:"),a.a.createElement(ge,{fileStartSource:n["report-src"],reportPath:e}))})))}})}var ke=function(){var e=Object(r.useContext)(_),t="/api/students?uuid=".concat(e);return a.a.createElement(A,{sources:[t],renders:{renderFound:function(e,t){var n=e[0];return a.a.createElement(a.a.Fragment,null,a.a.createElement(Se,{students:e}),a.a.createElement(p,{caption:"Actualizar",renders:{renderExpanded:function(){return a.a.createElement(te,{values:n,onSuccess:[{id:"fetcher",handler:function(){return t()}}],renders:{renderSuccess:function(){return a.a.createElement(re,{duration:2500,type:"success"},"Alumno actualizado correctamente!")},renderError:function(){return a.a.createElement(re,{duration:2500,type:"error"},"Error al actualizar alumno")}}})}}}))}}})};var we=function(){return a.a.createElement(D,null,a.a.createElement(m,null),a.a.createElement(ye,null),a.a.createElement(ke,null))};var Ce=function(){return a.a.createElement("h1",null,"NOT FOUND")};var xe=$((function(e){var t=e.onInput;return a.a.createElement(z,{onInput:t,fields:[{name:"username",label:"Usuario",type:"text"},{name:"password",label:"Contrase\xf1a",type:"password"}],required:!0})}),{useSubmit:function(){var e=U(),t=Object(d.a)(e,4),n=t[0],a=t[1],c=t[2],u=t[3];return Object(r.useEffect)((function(){if(a.toSubmit&&a.toSubmit.current){var e=a.toSubmit.current,t=N.a.CancelToken.source();return N.a.post("/login/user",e,{cancelToken:t.token}).then((function(){return window.location.href="/"})).catch((function(e){N.a.isCancel(e)||u.onError().execute(e)})),function(){return t.cancel()}}}),[a,u]),[n,c,u]},useInput:L});var Fe=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(m,null),a.a.createElement(xe,{renders:{renderError:function(){return a.a.createElement(re,{duration:2500,type:"error"},"No se pudo autenticar")}}}))};var Ne=function(){return a.a.createElement(o.a,null,a.a.createElement(i.c,null,a.a.createElement(i.a,{exact:!0,path:"/"},a.a.createElement(pe,null)),a.a.createElement(i.a,{exact:!0,path:"/login"},a.a.createElement(Fe,null)),a.a.createElement(i.a,{exact:!0,path:"/student"},a.a.createElement(we,null)),a.a.createElement(i.a,{path:"/*"},a.a.createElement(Ce,null))))};var Ie=function(){return a.a.createElement(Ne,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(Ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.4d69785a.chunk.js.map